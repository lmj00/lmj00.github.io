---
title: "transaction과 lock"
layout: post
categories: sql
---  


### transaction
> 데이터베이스의 내용을 커밋하거나 롤백할 수 있는 원자 단위 작업

> 여러 개의 데이터베이스 연산이 하나의 트랜잭션으로 묶이면, 여러 사용자가 동시에 접근하여 데이터를 수정해도 일관성과 무결성을 유지할 수 있게 되어 사용한다.

> 데이터베이스에서 일관성을 유지하기 위해 ACID 원칙을 따름


### ACID 
원자성(Atomicity)
> 모든 작업이 수행되거나 수행되지 않아야 한다.

일관성(Consistency)
> 데이터는 트랜잭션이 시작될 때와 끝날 때 일관된 상태로 유지해야 한다.

격리성(Isolation)
> 트랜잭션이 커밋될 때까지 다른 트랜잭션이 간섭하거나 영향을 미치지 않아야 한다.

지속성(Durability)
> 트랜잭션이 완료된 후, 결과는 영구적으로 저장되어야 한다. <br>
> 시스템 오류가 발생하더라도 데이터가 손실되지 않도록 하고, 변경 사항이 유지되어야 한다.


### 무결성
> 데이터의 유효성을 보장하고 데이터 간의 관계를 지키며, 데이터베이스에 설정된 규칙과 제약 조건을 준수하는 것

개체 무결성
>

참조 무결성
>

도메인 무결성
>

범위 무결성
>

동시성 제어 무결성
>

---

### lock
> 데이터베이스에서 동시에 여러 개의 트랜잭션이 동일한 데이터를 접근하려고 할 때 발생하는 충돌을 방지하기 위해 사용되는 동시성 제어 메커니즘

> 트랜잭션이 데이터를 읽거나 수정할 때 다른 트랜잭션들로부터 데이터에 대한 접근을 제한함으로써 데이터 일관성을 유지

> 데이터베이스 시스템에서 자동으로 관리되며, 트랜잭션이 데이터에 접근할 때 필요한 락을 자동으로 획득하고 해제


### 공유 락(Shared Lock)
> 공유 락은 여러 트랜잭션이 동시에 데이터를 읽을 수 있지만, 쓰기는 허용하지 않음


### 배타적 락(Exclusive Lock)
> 하나의 트랜잭션이 데이터를 읽고 수정하는 동안 다른 트랜잭션의 접근을 제한
> Exclusive Lock을 획득한 트랜잭션은 해당 데이터를 독점하여 접근
